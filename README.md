# all-the-packages

All the npm registry metadata as an offline event stream.

## Why?

There is a ton of useful package metadata in the npm registry, but if
you're not an expert with CouchDB it can be pretty difficult to access. Back in
early 2015, npm Inc created a
[private internal registry API)(https://github.com/npm/public-api) that is
accessible exclusively to the npm website and npm CLI, and there are
[no signs](https://github.com/npm/public-api/issues) of that API becoming
publicly available any time soon.

This package in an attempt to make the npm registry's metadata more accessible to a
broader group of developers by encapsulating the entire registry in a single
node module with a simple streaming interface.

## Installation

```sh
npm install all-the-packages --save
```

When you `npm install` this package, a `postinstall` script downloads
the registry metadata JSON file, which is about 400 MB.

To refresh the module once you've already installed it, just reinstall:

```sh
npm rm all-the-packages && npm i all-the-packages
```

## Usage

This package provides a simple event emitter that emits two events:
`package` and `end`.

```js
const registry = require('all-the-packages')

registry
  .on('package', function (pkg) {
    console.log(`${pkg.name} - ${pkg.description}\n`)
  })
  .on('end', function () {
    // done
  })
```

## Why Streams?

Streams are cool and all, but the main reason this module has a streaming
interface is *RAM*. It would be nice to just `require` the module and have a
giant registry object to work with, but a 400 MB JSON file is too big to fit in
memory on most computers.

## Tests

```sh
npm install
npm test
```

## Dependencies

- [JSONStream](https://github.com/dominictarr/JSONStream): rawStream.pipe(JSONStream.parse()).pipe(streamOfObjects)
- [event-stream](https://github.com/dominictarr/event-stream): construct pipes of streams of events

## Dev Dependencies

- [tap-spec](https://github.com/scottcorgan/tap-spec): Formatted TAP output like Mocha&#39;s spec reporter
- [tape](https://github.com/substack/tape): tap-producing test harness for node and browsers


## License

MIT

_Generated by [package-json-to-readme](https://github.com/zeke/package-json-to-readme)_
